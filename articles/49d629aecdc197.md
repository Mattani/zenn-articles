---
title: "Redmineで予定工数に対する作業時間の割合を表示する"
emoji: "🐈"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [Redmine,ViewCustomize]
published: true
---
## はじめに

Redmine-users-jaのメーリングリストに、以下のような質問がありました

> プロジェクトの各チケットに予定工数を登録しており、日々そのチケットへ作業時間を登録しています。
> 例えば、プロジェクトA内チケットA-1の作業時間が予定工数の80%を超えると、メール通知するといった方法はありますでしょうか。
> メール通知でなくとも、チケットの色が変わるなどでも教えていただける助かります。
> 調査していたのですが目ぼしい情報が見つからず、ご存知の方ご教示いただけますと幸いです。

メールを送るのはちょっと工夫しないといけない気がしますが、画面上に表示するのはViewCustomizeプラグインを使えば簡単にできますので紹介します。

## ViewCustomizeプラグインスクリプト

スクリプトの中にも書いていますが、ViewCustomizeスクリプトの設定は以下の通りとします。プロジェクトのパターンは任意です。特定のプロジェクトのみで利用したい場合などは設定してください。特にプロジェクトを指定しない場合は空欄で大丈夫です。

* パスのパターン:/issues/[0-9]+$
* プロジェクトのパターン:任意
* 挿入位置: 全ページのヘッダ
* 種別: JavaScript

* コード
@[gist](https://gist.github.com/Mattani/eaa0cb6383e4e53131e0d13f7ce0643c)

## 表示結果のサンプル

以下のように、作業時間の下に、予定工数の何パーセントかを表示することができました。色や表示条件はスクリプトのなかで必要であればお好みでカスタマイズしてください。

![表示結果サンプル](/images/percentage_sample.png)

## 謝辞

すばらしいプラグインを開発してくださったonozatyさん、ありがとうございます。ViewCustomizeプラグインは[こちら](https://github.com/onozaty/redmine-view-customize/tree/master)
